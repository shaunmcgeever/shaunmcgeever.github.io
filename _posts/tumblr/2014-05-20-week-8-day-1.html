---
layout: post
title: 'Week 8: Day 1'
date: '2014-05-20T00:58:00-04:00'
tags: []
tumblr_url: http://shaunmcgeeves.tumblr.com/post/86284043587/week-8-day-1
---
<p><br/> Today we presented our applications from the past weekend. Ours can be seen here: <a href="http://thesoundcrowd.herokuapp.com/">http://thesoundcrowd.herokuapp.com/</a> <br/><br/> We had a code review of our project with both of our instructors. This was very helpful, seeing that this was our first actual rails application. We cleared up some issues regarding session helpers, overall testing and TDD, and where to define the methods regarding the API (to ensure that unnecessary/multiple calls weren’t made).<br/><br/> Our assignments for the day included enhancing web performance of our rails applications. More specifically, this can be done by removing costly ActiveRecord calls and using more efficient ActiveRecord methods, or even writing SQL code. For this exercise, we had over ten thousand users and over one hundred and fifty thousand karma points (karma points belonged to user). When the current application was loaded, it took at least 10 seconds (10,000ms) to render the home page, which only included the top 50 users with the most karma points. The current application pulled all of the users from the database, sorted them by karma points, then pulled the top 50. It was our job to increase the speed of this search. The first thing we did was add an index to the karma_points table on the user_id. This will help us direct the karma points to the correct user so we can search through it quickly. The current method used to save the karma_points for each user is shown here&#8230;<br/><br/><img alt="image" src="https://31.media.tumblr.com/0ff01a44ac9f5c341f5defb2457cb2fa/tumblr_inline_n5uwi9XMB51swddm8.png"/></p>

<p></p>
<p>… and after some fighting with syntax and SQL, we were able to change that to….<br/><br/><img alt="image" src="https://31.media.tumblr.com/4cfe3809514ad2aa0083b56d1f2fec7d/tumblr_inline_n5uwgrS8h31swddm8.png"/></p>
<p><br/> …by including the following custom rake task that we can run before deploying….<br/><br/><img alt="image" src="https://31.media.tumblr.com/ed2a9c3eaa2388bd372c2117fd5c9557/tumblr_inline_n5uwfvjY0m1swddm8.png"/></p>

<p>&#8230;which totaled all of the users karma in the karma_points table and saved it as an attribute of the user. This reduced our pages initial load time to roughly 180ms, which is 98.2% faster than the original. ActiveRecord is very user friendly and powerful, but the time costs can be very expensive. Everything has a trade off.</p>
